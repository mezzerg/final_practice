<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <title>Edit Customer</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="container mt-4">

<h2>Edit Customer</h2>

<form th:action="@{/update}" th:object="${customer}" method="post" class="form">

    <!-- Error message -->
    <div th:if="${error}" class="alert alert-danger" th:text="${error}"></div>

    <!-- Hidden ID -->
    <input type="hidden" th:field="*{id}">

    <!-- Customer Number (read-only) -->
    <div class="mb-3">
        <label for="customerNumber" class="form-label">Customer Number</label>
        <input type="number" th:field="*{customerNumber}" id="customerNumber" class="form-control" required>
    </div>

    <!-- Customer Name -->
    <div class="mb-3">
        <label for="name" class="form-label">Customer Name</label>
        <input type="text" th:field="*{name}" id="name" class="form-control" required>
    </div>

    <!-- Deposit -->
    <div class="mb-3">
        <label for="deposit" class="form-label">Deposit</label>
        <input type="number" step="0.01" th:field="*{deposit}" id="deposit" class="form-control" required>
    </div>

    <!-- Years -->
    <div class="mb-3">
        <label for="years" class="form-label">Number of Years</label>
        <input type="number" th:field="*{years}" id="years" class="form-control" required>
    </div>

    <!-- Savings Type -->
    <div class="mb-3">
        <label for="savingsType" class="form-label">Savings Type</label>
        <select th:field="*{savingsType}" id="savingsType" class="form-select" required>
            <option value="Savings-Regular">Savings-Regular</option>
            <option value="Savings-Deluxe">Savings-Deluxe</option>
        </select>
    </div>

    <button type="submit" class="btn btn-success">Update</button>
    <a th:href="@{/}" class="btn btn-secondary">Cancel</a>
</form>

<script>
    window.addEventListener("DOMContentLoaded", function() {
        // Handle error messages
        const errorBox = document.querySelector(".alert-danger");
        if (errorBox) {
            setTimeout(() => {
                errorBox.style.transition = "opacity 0.5s ease";
                errorBox.style.opacity = "0";
                setTimeout(() => errorBox.remove(), 500);
            }, 4000); // 4 seconds (slightly longer for errors)
        }
    });
</script>
</body>
</html>
